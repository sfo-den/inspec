---
expeditor:
  defaults:
    buildkite:
      timeout_in_minutes: 45
      retry:
        automatic:
          limit: 1

steps:
  - label: lint-ruby-2.6
    command:
      - RAKE_TASK=test:lint /workdir/.expeditor/buildkite/verify.sh
    expeditor:
      executor:
        docker:
          image: ruby:2.6

  - label: run-unit-tests-ruby-2.6
    command:
      - RAKE_TASK=test:unit /workdir/.expeditor/buildkite/verify.sh
    expeditor:
      executor:
        docker:
          image: ruby:2.6

  - label: run-unit-tests-ruby-2.7
    command:
      - RAKE_TASK=test:unit /workdir/.expeditor/buildkite/verify.sh
    expeditor:
      executor:
        docker:
          image: ruby:2.7

